{"ast":null,"code":"import React,{useState,useContext,createContext,useRef,useSyncExternalStore}from\"react\";import styled from\"styled-components\";import axios from'axios';import{full_data,new_data,Stock_full_data,Stock_full_data_opt}from\"./Apps/Data/stock_data.js\";import{axios_post_data_save,axios_get_data_load}from\"./Apps/Server/client_call_server.js\";import Box from\"@mui/material/Box\";import Drawer from\"@mui/material/Drawer\";import Button from\"@mui/material/Button\";import Side_slide from'./Apps/Side/side_slide.js';import Input_post from\"./Apps/Main_post/Input_post/input_post.js\";import Tables from'./Apps/Main_post/table/table.js';import Data_set_post from\"./Apps/Main_post/data_post/data_set_post.js\";import Result_post from\"./Apps/Main_post/result_post/result_post.js\";import Global_setting_post from\"./Apps/Main_post/global_data_post/global_setting_post.js\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const page_names=[\"global_setting\",\"table\",\"result_data\",\"data_set\"];function Main_page_return(props){if(props.page_name==\"table\"){return/*#__PURE__*/_jsx(Tables,{});}else if(props.page_name==\"result_data\"){return/*#__PURE__*/_jsx(Result_post,{data:props.data});}else if(props.page_name==\"data_set\"){return/*#__PURE__*/_jsx(Data_set_post,{date:props.date,set_date:props.set_date});}else if(props.page_name==\"global_setting\"){return/*#__PURE__*/_jsx(Global_setting_post,{});}}function Main_layout(props){const[save_data,set_save_data]=useState();const cot_full_data=save_data;const cot_full_data_opt={ref:useRef(new_data()),update:set_save_data,user_id:props.login_id};const[date,set_date]=useState(cot_full_data_opt.ref.current.date);//cot_full_data_opt.update({...cot_full_data_opt.ref.current});\n//const cot_full_data = [useRef(new_data())];\nconst[d_open,set_d_open]=useState(false);const[drawer_page,set_drawer_page]=useState(page_names[0]);const drawer_toggle=tog=>()=>{set_d_open(tog);};const side_width=250;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Stock_full_data.Provider,{value:cot_full_data,children:/*#__PURE__*/_jsx(Stock_full_data_opt.Provider,{value:cot_full_data_opt,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex'},children:[/*#__PURE__*/_jsx(Drawer,{variant:\"permanent\",anchor:\"left\",sx:{width:side_width},children:/*#__PURE__*/_jsx(Side_slide,{side_width:side_width,page_list:page_names,drawer_page:drawer_page,set_drawer_page:set_drawer_page})}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',width:\"100%\"},children:[/*#__PURE__*/_jsx(Box,{position:\"sticky\",sx:{top:'0px',height:\"10vh\"},children:/*#__PURE__*/_jsx(Head_post,{date:date})}),/*#__PURE__*/_jsx(Box,{sx:{width:\"100%\",overflow:'auto',height:\"90vh\"},children:/*#__PURE__*/_jsx(Main_page_return,{page_name:drawer_page,data:cot_full_data_opt.ref,date:date,set_date:set_date})})]})]})})})});}function Head_post(props){const cont_stock_full_data=useContext(Stock_full_data_opt);async function save_click(){//console.log(\"save_date\", cont_stock_full_data.ref.current.date);\naxios_post_data_save(cont_stock_full_data.ref.current,cont_stock_full_data.user_id);//console.log(\"save\");\ncont_stock_full_data.update({...cont_stock_full_data.ref.current});}async function load_click(){//console.log(\"load_date\", cont_stock_full_data.ref.current.date);\n//const data = await axios.get(\"http://localhost:8000/data/load\", { params: {date: cont_stock_full_data.ref.current.date}});\nconst data=await axios_get_data_load(cont_stock_full_data.ref.current.date,cont_stock_full_data.user_id);const data_json=JSON.parse(data.data);if(data_json.date==\"new\"){//console.log(\"new\");\ncont_stock_full_data.ref.current=new_data(cont_stock_full_data.ref.current.date);//cont_stock_full_data = useRef({...cont_stock_full_data.current});\n}else{console.log(data_json);cont_stock_full_data.ref.current=data_json;}cont_stock_full_data.update({...cont_stock_full_data.ref.current});}function console_click(){console.log(cont_stock_full_data.ref.current);cont_stock_full_data.update({...cont_stock_full_data.ref.current});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:save_click,children:\"save\"}),/*#__PURE__*/_jsx(Button,{onClick:load_click,children:\"load\"}),/*#__PURE__*/_jsx(Button,{onClick:console_click,children:\"console\"}),props.date]});}export default Main_layout;","map":{"version":3,"names":["React","useState","useContext","createContext","useRef","useSyncExternalStore","styled","axios","full_data","new_data","Stock_full_data","Stock_full_data_opt","axios_post_data_save","axios_get_data_load","Box","Drawer","Button","Side_slide","Input_post","Tables","Data_set_post","Result_post","Global_setting_post","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","page_names","Main_page_return","props","page_name","data","date","set_date","Main_layout","save_data","set_save_data","cot_full_data","cot_full_data_opt","ref","update","user_id","login_id","current","d_open","set_d_open","drawer_page","set_drawer_page","drawer_toggle","tog","side_width","children","Provider","value","sx","display","variant","anchor","width","page_list","flexDirection","position","top","height","Head_post","overflow","cont_stock_full_data","save_click","load_click","data_json","JSON","parse","console","log","console_click","onClick"],"sources":["C:/Users/USER/jusick_server/client/src/main_page.js"],"sourcesContent":["import React, {useState, useContext, createContext, useRef, useSyncExternalStore} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport axios from 'axios';\r\n\r\nimport { full_data, new_data, Stock_full_data, Stock_full_data_opt } from \"./Apps/Data/stock_data.js\";\r\nimport {axios_post_data_save, axios_get_data_load} from \"./Apps/Server/client_call_server.js\"\r\n\r\nimport Box from \"@mui/material/Box\";\r\nimport Drawer from \"@mui/material/Drawer\";\r\n\r\nimport Button from \"@mui/material/Button\";\r\n\r\nimport Side_slide from './Apps/Side/side_slide.js';\r\nimport Input_post from \"./Apps/Main_post/Input_post/input_post.js\";\r\nimport Tables from './Apps/Main_post/table/table.js'\r\nimport Data_set_post from \"./Apps/Main_post/data_post/data_set_post.js\";\r\nimport Result_post from \"./Apps/Main_post/result_post/result_post.js\";\r\nimport Global_setting_post from \"./Apps/Main_post/global_data_post/global_setting_post.js\";\r\n\r\nconst page_names = [\"global_setting\", \"table\", \"result_data\", \"data_set\"]\r\n\r\n\r\nfunction Main_page_return(props)\r\n{\r\n    if (props.page_name == \"table\")\r\n    {\r\n        return (\r\n            <Tables />\r\n        )\r\n    }\r\n    else if (props.page_name == \"result_data\")\r\n    {\r\n        return (\r\n            <Result_post data={props.data}/>\r\n        )\r\n    }\r\n\r\n    else if (props.page_name == \"data_set\")\r\n    {\r\n        return (\r\n            <Data_set_post date={props.date} set_date={props.set_date}/>\r\n        )\r\n    }\r\n\r\n    else if (props.page_name == \"global_setting\")\r\n    {\r\n        return (\r\n            <Global_setting_post />\r\n        )\r\n    }\r\n}\r\n\r\n\r\nfunction Main_layout(props)\r\n{\r\n    const [save_data, set_save_data] = useState();\r\n    const cot_full_data = save_data;\r\n    const cot_full_data_opt = {ref: useRef(new_data()), update: set_save_data, user_id: props.login_id};\r\n    const [date, set_date] = useState(cot_full_data_opt.ref.current.date);\r\n    //cot_full_data_opt.update({...cot_full_data_opt.ref.current});\r\n\r\n    //const cot_full_data = [useRef(new_data())];\r\n    const [d_open, set_d_open] = useState(false);\r\n    const [drawer_page, set_drawer_page] = useState(page_names[0]);\r\n\r\n    const drawer_toggle = (tog) => () => {\r\n        set_d_open(tog)\r\n    };\r\n\r\n    const side_width = 250\r\n\r\n    return(\r\n        <>\r\n            <Stock_full_data.Provider value={cot_full_data}>\r\n                <Stock_full_data_opt.Provider value={cot_full_data_opt}>\r\n                <Box sx={{ display: 'flex'}}>\r\n\r\n                \r\n                    <Drawer variant=\"permanent\" anchor=\"left\"\r\n                        sx={{width: side_width}}>\r\n                        <Side_slide side_width={side_width} page_list={page_names} \r\n                            drawer_page={drawer_page} set_drawer_page={set_drawer_page}/>\r\n                    </Drawer>\r\n\r\n                    <Box sx={{ display: 'flex', flexDirection: 'column', width: \"100%\"}}>\r\n                        <Box position='sticky' sx={{top:'0px', height: \"10vh\"}}>\r\n                            <Head_post date={date}/>\r\n                        </Box>\r\n\r\n                        {\r\n\r\n                        }\r\n                        <Box sx={{width: \"100%\", overflow: 'auto', height: \"90vh\"}}>\r\n                            \r\n                            <Main_page_return page_name={drawer_page} data={cot_full_data_opt.ref}\r\n                                date={date} set_date={set_date}/>\r\n\r\n                            \r\n                        </Box>\r\n                    </Box>\r\n                    \r\n                </Box>\r\n                </Stock_full_data_opt.Provider>\r\n            </Stock_full_data.Provider>\r\n            \r\n        </>\r\n            \r\n    );\r\n}\r\n\r\nfunction Head_post(props)\r\n{\r\n    const cont_stock_full_data = useContext(Stock_full_data_opt);\r\n\r\n    async function save_click ()\r\n    {\r\n        //console.log(\"save_date\", cont_stock_full_data.ref.current.date);\r\n\r\n        axios_post_data_save(cont_stock_full_data.ref.current, cont_stock_full_data.user_id);\r\n        //console.log(\"save\");\r\n        cont_stock_full_data.update({...cont_stock_full_data.ref.current});\r\n    }\r\n\r\n    async function load_click()\r\n    {\r\n\r\n        //console.log(\"load_date\", cont_stock_full_data.ref.current.date);\r\n        //const data = await axios.get(\"http://localhost:8000/data/load\", { params: {date: cont_stock_full_data.ref.current.date}});\r\n        const data = await axios_get_data_load(cont_stock_full_data.ref.current.date, cont_stock_full_data.user_id);\r\n        const data_json = JSON.parse(data.data);\r\n        if (data_json.date == \"new\")\r\n        {\r\n            //console.log(\"new\");\r\n            cont_stock_full_data.ref.current = new_data(cont_stock_full_data.ref.current.date);\r\n            //cont_stock_full_data = useRef({...cont_stock_full_data.current});\r\n        }\r\n        else\r\n        {\r\n            console.log(data_json);\r\n            cont_stock_full_data.ref.current = data_json;\r\n        }\r\n        cont_stock_full_data.update({...cont_stock_full_data.ref.current});\r\n    }\r\n\r\n    function console_click()\r\n    {\r\n        console.log(cont_stock_full_data.ref.current);\r\n        cont_stock_full_data.update({...cont_stock_full_data.ref.current});\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Button onClick={save_click}>\r\n                save\r\n            </Button>\r\n            <Button onClick={load_click}>\r\n                load\r\n            </Button>\r\n            <Button onClick={console_click}>\r\n                console\r\n            </Button>\r\n            {props.date}\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nexport default Main_layout;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}